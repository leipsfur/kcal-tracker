# Implementierungs-Todos

## Phase 1: Projektstruktur

- [x] Room-Dependency in `libs.versions.toml` und `build.gradle.kts` hinzufügen
- [x] KSP-Plugin für Room hinzufügen
- [x] Navigation Compose Dependency hinzufügen
- [x] Glance (Widget) Dependency hinzufügen
- [x] Paketstruktur anlegen (`data/db`, `data/repository`, `ui/*`, `widget`)
- [x] `KcalTrackApplication`-Klasse erstellen und in `AndroidManifest.xml` registrieren
- [x] Theme-Setup prüfen (Dynamic Colors, Dark Mode Fallback)

## Phase 2: Datenschicht

- [x] Room Entities erstellen: `FoodTemplate`, `FoodEntry`, `ActivityTemplate`, `ActivityEntry`, `WeightEntry`, `FoodCategory`, `ActivityCategory`, `UserSettings` <!-- verified by ai-factory, iteration 2 -->
- [x] DAOs erstellen: `FoodTemplateDao`, `FoodEntryDao`, `ActivityTemplateDao`, `ActivityEntryDao`, `WeightEntryDao`, `FoodCategoryDao`, `ActivityCategoryDao`, `UserSettingsDao` <!-- verified by ai-factory, iteration 2 -->
- [x] `KcalTrackDatabase` erstellen (RoomDatabase) <!-- verified by ai-factory, iteration 2 -->
- [x] Initiale Kategorien per `RoomDatabase.Callback` einfügen (Essen: Frühstück, Mittagessen, Abendessen, Snack, Alkohol; Aktivität: Cardio, Krafttraining, Alltag) <!-- verified by ai-factory, iteration 2 -->
- [x] Repositories erstellen: `FoodRepository`, `ActivityRepository`, `WeightRepository`, `SettingsRepository` <!-- verified by ai-factory, iteration 2 -->
- [x] Manuelle DI: Database- und Repository-Instanzen in `KcalTrackApplication` bereitstellen <!-- verified by ai-factory, iteration 2 -->

## Phase 2b: Datenschicht-Ergänzungen (neue Stories)

- [ ] `update()`-Methode zu `FoodEntryDao` hinzufügen (für US-0208: Eintrag bearbeiten)
- [ ] `update()`-Methode zu `ActivityEntryDao` hinzufügen (für US-0308: Eintrag bearbeiten)
- [ ] `updateEntry()`-Methode zu `FoodRepository` hinzufügen
- [ ] `updateEntry()`-Methode zu `ActivityRepository` hinzufügen
- [ ] Portionseinheiten als Konstanten-Liste definieren (g, ml, Stück, Scheibe, Portion, EL, TL)

## Phase 3: Navigation

- [x] Bottom Navigation Bar implementieren (5 Tabs: Dashboard, Essen, Aktivität, Gewicht, Einstellungen) <!-- verified by ai-factory, iteration 1 -->
- [x] `NavHost` mit Routes für alle Screens einrichten <!-- verified by ai-factory, iteration 1 -->
- [x] Placeholder-Screens für alle 5 Tabs erstellen <!-- verified by ai-factory, iteration 1 -->
- [x] Icons und Labels für Navigation Tabs definieren <!-- verified by ai-factory, iteration 1 -->

## Phase 4: Einstellungen (US-0501, US-0502)

- [ ] `SettingsViewModel` erstellen
- [ ] `SettingsScreen` implementieren: Grundumsatz-Eingabe mit Validierung
- [ ] Grundumsatz in `UserSettings`-Entity speichern/laden

## Phase 5: Essen-Tracking (US-0201–US-0208)

- [ ] `FoodViewModel` erstellen
- [ ] Essen-Screen: Tab/Bereich für Vorlagen-Verwaltung
- [ ] Lebensmittel-Vorlage erstellen (Dialog mit Portionseinheit-Dropdown und Validierung)
- [ ] Lebensmittel-Vorlage bearbeiten
- [ ] Lebensmittel-Vorlage löschen (mit Bestätigungsdialog)
- [ ] Essen erfassen über Vorlage (Bottom Sheet: Vorlagenauswahl, Mengenanpassung, kcal-Berechnung)
- [ ] Essen manuell erfassen (Dialog mit Validierung)
- [ ] Essen-Eintrag bearbeiten (Dialog, vorausgefüllt mit bestehenden Werten)
- [ ] Essen-Eintrag löschen (mit Bestätigungsdialog)
- [ ] Essen-Kategorien verwalten (Unter-Screen: hinzufügen, umbenennen, löschen, sortieren)

## Phase 6: Aktivitäts-Tracking (US-0301–US-0308)

- [ ] `ActivityViewModel` erstellen
- [ ] Aktivitäts-Screen: Tab/Bereich für Vorlagen-Verwaltung
- [ ] Aktivitäts-Vorlage erstellen (Dialog mit Validierung)
- [ ] Aktivitäts-Vorlage bearbeiten
- [ ] Aktivitäts-Vorlage löschen (mit Bestätigungsdialog)
- [ ] Aktivität erfassen über Vorlage (Bottom Sheet: Vorlagenauswahl, kcal anpassbar)
- [ ] Aktivität manuell erfassen (Dialog mit Validierung)
- [ ] Aktivitäts-Eintrag bearbeiten (Dialog, vorausgefüllt mit bestehenden Werten)
- [ ] Aktivitäts-Eintrag löschen (mit Bestätigungsdialog)
- [ ] Aktivitäts-Kategorien verwalten (Unter-Screen: hinzufügen, umbenennen, löschen, sortieren)

## Phase 7: Dashboard (US-0101–US-0104)

- [ ] `DashboardViewModel` erstellen (mit selektiertem Datum, Standard: heute)
- [ ] Datumsnavigation: Pfeile vor/zurück + "Heute"-Button
- [ ] TDEE-Berechnung: Grundumsatz + Σ Aktivitäten des selektierten Tages
- [ ] Verbleibende kcal berechnen: TDEE - Σ Aufnahme des selektierten Tages
- [ ] Negativer Kalorienstand: Rote Darstellung + Minus-Zeichen
- [ ] Dashboard-Screen: TDEE, Aufnahme und Übrig anzeigen
- [ ] Tageseinträge nach Kategorie gruppiert anzeigen (mit Zwischensummen)
- [ ] Hinweis anzeigen wenn kein Grundumsatz eingestellt
- [ ] Validierung: Keine Navigation in die Zukunft

## Phase 8: Gewichts-Tracking (US-0401–US-0404)

- [ ] `WeightViewModel` erstellen
- [ ] Gewicht-erfassen-Formular (kg, eine Dezimalstelle, Validierung)
- [ ] Ein Eintrag pro Tag (überschreiben bei erneutem Eintrag)
- [ ] Chronologische Liste mit Differenz zum vorherigen Eintrag
- [ ] Liniendiagramm (Compose Canvas oder Bibliothek evaluieren)
- [ ] Gewichts-Eintrag löschen (mit Bestätigungsdialog)

## Phase 9: Widget (US-0601, US-0602)

- [ ] Glance Widget erstellen: Verbleibende kcal anzeigen
- [ ] Widget-Update bei Datenänderungen triggern
- [ ] Quick-Add Overlay: Activity/Dialog mit Vorlagen-Liste
- [ ] Quick-Add: Portionsmenge abfragen und Eintrag erstellen
- [ ] Widget-Design nach Material You / Glance-Richtlinien

## Phase 10: Barrierefreiheit (US-0704)

- [ ] Content Descriptions für alle Icons und interaktiven Elemente
- [ ] Mindest-Touch-Targets (48dp) prüfen und sicherstellen
- [ ] Farbkontraste nach WCAG AA validieren
- [ ] Informationen nicht ausschließlich über Farbe vermitteln
- [ ] Eingabefelder mit sichtbaren Labels (nicht nur Placeholder)
- [ ] TalkBack-Navigation testen

## Phase 11: Qualitätssicherung

- [ ] Unit Tests für ViewModels (Berechnungslogik, Datumsnavigation)
- [ ] Unit Tests für Repositories
- [ ] Instrumented Tests für Room DAOs (inkl. update-Methoden)
- [ ] UI Tests für kritische Flows (Essen erfassen, Aktivität erfassen, Eintrag bearbeiten)
- [ ] Edge Cases testen: Leere Datenbank, kein Grundumsatz, Tageswechsel, negative Übrig-Werte
- [ ] Barrierefreiheit testen: TalkBack, Touch-Targets, Kontraste
- [ ] Performance: Große Datenmengen in Listen, Widget-Update-Frequenz
- [ ] Lint-Warnungen beheben
